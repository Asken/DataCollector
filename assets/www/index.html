<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title></title>
    <link rel="stylesheet" href="css/jquery.mobile-1.3.1.min.css">

    <!-- Extra Codiqa features -->
    <link rel="stylesheet" href="css/codiqa.ext.css">

    <!-- jQuery and jQuery Mobile -->
    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/jquery.mobile-1.3.1.min.js"></script>

    <!-- Extra Codiqa features -->
    <script src="js/codiqa.ext.js"></script>

    <!-- Cordova -->
    <script type="text/javascript" src="cordova.js"></script>

    <script type="text/javascript">
        var elements = e = {
            accelerometer: $('#accelerometer'),
            log: $('#log')
        };

        var app = {
            watchId: null,

            log: function(msg) {
                e.html(e.html() + '<br />' + msg);
            },

            loaded: function() {
                app.log('Loaded...');
                app.startWatch();
            },

            startWatch: function() {
                var options = {
                    frequency: 300
                };

                app.watchId = navigator.accelerometer.watchAcceleration(app.onAccelerationSuccess, app.onAccelerationFailure);
            },

            stopWatch: function() {
                if (app.watchId) {
                    navigator.accelerator.clearWatch(app.watchId);
                    app.watchId = null;
                }
            },

            onAccelerationSuccess: function() {
                var div = document.getElementById('accelerometer');

                elements.accelerometer.html('Acceleration X: ' + acceleration.x + '<br />' +
                        'Acceleration Y: ' + acceleration.y + '<br />' +
                        'Acceleration Z: ' + acceleration.z + '<br />' +
                        'Timestamp: '      + acceleration.timestamp + '<br />');
            },

            onAccelerationFailure: function() {
                elements.accelerometer.html('Accelerator watch failed...');
            }
        }

        document.addEventListener("deviceready", app.loaded, false);
    </script>
</head>
<body>
    <!-- Home -->
    <div data-role="page" id="page1">
        <div id="head" data-role="header" class="head">
            <h3>
                Data Collector
            </h3>
        </div>
        <div data-role="content">
            <a id="tasks" data-role="button" href="#page1">
                Tasks
            </a>
            <a id="synchronise" data-role="button" href="#page1" onclick="alert('Ya fucker!');">
                Synchronise
            </a>
        </div>
        <div data-role="content" id="accelerometer">
            Accelerometer
        </div>
        <div data-role="content" id="log">

        </div>
    </div>
</body>
</html>